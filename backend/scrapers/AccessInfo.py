import requests
from sys import stdout
import json

latitude =   [40.6943,
                34.1139,
                41.8373,
                25.784,
                32.7937,
                40.0076,
                29.7868,
                38.9047,
                33.7626,
                42.3188,
                33.5722,
                47.6211,
                37.7562,
                42.3834,
                32.8312,
                44.9635,
                27.9937,
                39.7621,
                40.6501,
                40.7498,
                39.3051,
                33.9381,
                38.6358,
                36.2291,
                45.5372,
                29.4722,
                38.5667,
                37.3018,
                28.4788,
                41.4767,
                40.4396,
                39.1412,
                40.7834,
                30.3006,
                39.1239,
                39.7771,
                39.986,
                36.7335,
                35.2079,
                40.8501,
                43.064,
                41.8229,
                30.3322,
                40.7774,
                36.1714,
                35.1047,
                37.5295,
                30.0687,
                35.8323,
                38.1662,
                35.4676,
                41.1909,
                42.9017,
                41.7661,
                32.7814,
                32.1546,
                31.8479,
                21.3294,
                41.2628,
                26.2325,
                35.1053,
                33.5276,
                39.7797,
                43.168,
                27.3391,
                36.7834,
                40.5961,
                36.1284,
                37.9722,
                26.6444,
                42.1155,
                38.8674,
                32.8137,
                42.9615,
                33.6095,
                42.6664,
                35.9692,
                30.4423,
                35.353,
                41.228,
                41.3112,
                34.037,
                41.0802,
                40.2458,
                42.2705,
                33.4017,
                27.9861,
                41.6639,
                33.5719,
                37.6897,
                41.5725,
                40.5834,
                33.8059,
                34.8363,
                34.7255,
                40.2752,
                33.2176,
                43.0808,
                39.5497,
                27.2796]

longitude = [-73.9249,
            -118.4068,
            -87.6861,
            -80.2102,
            -96.7662,
            -75.134,
            -95.3905,
            -77.0163,
            -84.4228,
            -71.0846,
            -112.0891,
            -122.3244,
            -122.443,
            -83.1024,
            -117.1226,
            -93.2678,
            -82.4454,
            -104.8759,
            -73.9496,
            -73.7976,
            -76.6144,
            -117.3948,
            -90.2451,
            -115.2607,
            -122.65,
            -98.5247,
            -121.4683,
            -121.8485,
            -81.342,
            -81.6805,
            -79.9763,
            -84.5059,
            -73.9662,
            -97.7517,
            -94.5541,
            -86.1458,
            -82.9852,
            -76.0435,
            -80.8303,
            -73.8662,
            -87.9669,
            -71.4186,
            -81.6749,
            -111.9301,
            -86.7844,
            -89.9773,
            -77.4756,
            -89.9288,
            -78.6439,
            -85.6488,
            -97.5136,
            -73.1958,
            -78.8487,
            -72.6834,
            -97.3473,
            -110.8782
            -106.4309,
            -157.846,
            -96.0495,
            -98.2467,
            -106.6464,
            -86.7988,
            -84.1998,
            -77.6162,
            -82.5439,
            -119.7941,
            -75.4756,
            -95.9042,
            -122.0016,
            -81.9956,
            -72.5395,
            -104.7606,
            -79.9643,
            -85.6557,
            -117.6551,
            -73.7987,
            -83.9495,
            -91.1314,
            -119.036,
            -111.9677,
            -72.9245,
            -80.9042,
            -81.5219,
            -111.6457,
            -71.8079,
            -111.7181,
            -80.6628,
            -83.5822,
            -117.1909,
            -97.3442,
            -93.6104,
            -74.1496,
            -118.161,
            -82.365,
            -92.3581,
            -76.8843,
            -97.1421,
            -89.3922,
            -119.8483,
            -80.3883,
            ]

def cityScrape(lat, lon):
    url = "http://geodb-free-service.wirefreethought.com/v1/geo/cities?location="
    url += str(lat)
    url += str(lon)
    response = requests.get(url + "&radius=10")
    response.json()
    unformatted = json.loads(response.text)
    return unformatted.get('data')

i = 0
f = open("cities.csv", "w+")
while i < len(latitude):
    json.dump(cityScrape(latitude[i], longitude[i]), f)
    i+=1
f.close()