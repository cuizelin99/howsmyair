{"ast":null,"code":"var _jsxFileName = \"/Users/davidbomm/SWE/cs373-airpollution/frontend/src/visualizations/visual3.js\";\nimport React, { createRef, Component } from \"react\";\nimport * as d3 from \"d3\"; //From D3 Pie Chart on codesandbox: https://codesandbox.io/s/r5wp0v08xq\n\nclass PieClass extends Component {\n  constructor(props) {\n    super(props);\n    this.ref = createRef();\n    this.createPie = d3.pie().value(d => d.value).sort(null);\n    this.createArc = d3.arc().innerRadius(props.innerRadius).outerRadius(props.outerRadius);\n    this.colors = d3.scaleOrdinal(d3.schemeCategory10);\n    this.format = d3.format(\".2f\");\n  }\n\n  componentDidMount() {\n    const svg = d3.select(this.ref.current);\n    const data = this.createPie(this.props.data);\n    const _this$props = this.props,\n          width = _this$props.width,\n          height = _this$props.height,\n          innerRadius = _this$props.innerRadius,\n          outerRadius = _this$props.outerRadius;\n    svg.attr(\"class\", \"chart\").attr(\"width\", width).attr(\"height\", height);\n    const group = svg.append(\"g\").attr(\"transform\", \"translate(\".concat(outerRadius, \" \").concat(outerRadius, \")\"));\n    const groupWithEnter = group.selectAll(\"g.arc\").data(data).enter();\n    const path = groupWithEnter.append(\"g\").attr(\"class\", \"arc\");\n    path.append(\"path\").attr(\"class\", \"arc\").attr(\"d\", this.createArc).attr(\"fill\", (d, i) => this.colors(d.index));\n    path.append(\"text\").attr(\"text-anchor\", \"middle\").attr(\"alignment-baseline\", \"middle\").attr(\"transform\", d => \"translate(\".concat(this.createArc.centroid(d), \")\")).style(\"fill\", \"white\").style(\"font-size\", 10).text(d => this.format(d.value));\n  }\n\n  componentWillUpdate(nextProps, nextState) {\n    const svg = d3.select(this.ref.current);\n    const data = this.createPie(nextProps.data);\n    const group = svg.select(\"g\").selectAll(\"g.arc\").data(data);\n    group.exit().remove();\n    const groupWithUpdate = group.enter().append(\"g\").attr(\"class\", \"arc\");\n    const path = groupWithUpdate.append(\"path\").merge(group.select(\"path.arc\"));\n    path.attr(\"class\", \"arc\").attr(\"d\", this.createArc).attr(\"fill\", (d, i) => this.colors(i));\n    const text = groupWithUpdate.append(\"text\").merge(group.select(\"text\"));\n    text.attr(\"text-anchor\", \"middle\").attr(\"alignment-baseline\", \"middle\").attr(\"transform\", d => \"translate(\".concat(this.createArc.centroid(d), \")\")).text(d => this.format(d.value));\n  }\n\n  render() {\n    return React.createElement(\"svg\", {\n      ref: this.ref,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    });\n  }\n\n}\n\nexport default PieClass;","map":{"version":3,"sources":["/Users/davidbomm/SWE/cs373-airpollution/frontend/src/visualizations/visual3.js"],"names":["React","createRef","Component","d3","PieClass","constructor","props","ref","createPie","pie","value","d","sort","createArc","arc","innerRadius","outerRadius","colors","scaleOrdinal","schemeCategory10","format","componentDidMount","svg","select","current","data","width","height","attr","group","append","groupWithEnter","selectAll","enter","path","i","index","centroid","style","text","componentWillUpdate","nextProps","nextState","exit","remove","groupWithUpdate","merge","render"],"mappings":"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","sourcesContent":["import React, { createRef, Component } from \"react\";\nimport * as d3 from \"d3\";\n\n//From D3 Pie Chart on codesandbox: https://codesandbox.io/s/r5wp0v08xq\n\nclass PieClass extends Component {\n  constructor(props) {\n    super(props);\n    this.ref = createRef();\n    this.createPie = d3\n      .pie()\n      .value(d => d.value)\n      .sort(null);\n    this.createArc = d3\n      .arc()\n      .innerRadius(props.innerRadius)\n      .outerRadius(props.outerRadius);\n    this.colors = d3.scaleOrdinal(d3.schemeCategory10);\n    this.format = d3.format(\".2f\");\n  }\n  componentDidMount() {\n    const svg = d3.select(this.ref.current);\n    const data = this.createPie(this.props.data);\n    const { width, height, innerRadius, outerRadius } = this.props;\n\n    svg\n      .attr(\"class\", \"chart\")\n      .attr(\"width\", width)\n      .attr(\"height\", height);\n\n    const group = svg\n      .append(\"g\")\n      .attr(\"transform\", `translate(${outerRadius} ${outerRadius})`);\n\n    const groupWithEnter = group\n      .selectAll(\"g.arc\")\n      .data(data)\n      .enter();\n\n    const path = groupWithEnter.append(\"g\").attr(\"class\", \"arc\");\n\n    path\n      .append(\"path\")\n      .attr(\"class\", \"arc\")\n      .attr(\"d\", this.createArc)\n      .attr(\"fill\", (d, i) => this.colors(d.index));\n\n    path\n      .append(\"text\")\n      .attr(\"text-anchor\", \"middle\")\n      .attr(\"alignment-baseline\", \"middle\")\n      .attr(\"transform\", d => `translate(${this.createArc.centroid(d)})`)\n      .style(\"fill\", \"white\")\n      .style(\"font-size\", 10)\n      .text(d => this.format(d.value));\n  }\n\n  componentWillUpdate(nextProps, nextState) {\n    const svg = d3.select(this.ref.current);\n    const data = this.createPie(nextProps.data);\n\n    const group = svg\n      .select(\"g\")\n      .selectAll(\"g.arc\")\n      .data(data);\n\n    group.exit().remove();\n\n    const groupWithUpdate = group\n      .enter()\n      .append(\"g\")\n      .attr(\"class\", \"arc\");\n\n    const path = groupWithUpdate.append(\"path\").merge(group.select(\"path.arc\"));\n\n    path\n      .attr(\"class\", \"arc\")\n      .attr(\"d\", this.createArc)\n      .attr(\"fill\", (d, i) => this.colors(i));\n\n    const text = groupWithUpdate.append(\"text\").merge(group.select(\"text\"));\n\n    text\n      .attr(\"text-anchor\", \"middle\")\n      .attr(\"alignment-baseline\", \"middle\")\n      .attr(\"transform\", d => `translate(${this.createArc.centroid(d)})`)\n      .text(d => this.format(d.value));\n  }\n\n  render() {\n    return <svg ref={this.ref} />;\n  }\n}\n\nexport default PieClass;"]},"metadata":{},"sourceType":"module"}